{"version":3,"file":"status.js","names":["defaultState","PLUGINS_HASH","LAST_NODE_COUNTER","plugins","statusReducer","state","action","_action$plugin","type","payload","plugin","name","Error","_isObject2","default","JSON","stringify","_merge2","internal","counter","exports"],"sources":["../../../src/redux/reducers/status.ts"],"sourcesContent":["import _ from \"lodash\";\nimport { ActionsUnion, IGatsbyState } from \"../types\";\n\nconst defaultState: IGatsbyState[\"status\"] = {\n  PLUGINS_HASH: ``,\n  LAST_NODE_COUNTER: 0,\n  plugins: {},\n};\n\nexport const statusReducer = (\n  state: IGatsbyState[\"status\"] = defaultState,\n  action: ActionsUnion,\n): IGatsbyState[\"status\"] => {\n  switch (action.type) {\n    case `DELETE_CACHE`:\n      return defaultState;\n    case `UPDATE_PLUGINS_HASH`:\n      return {\n        ...state,\n        PLUGINS_HASH: action.payload,\n      };\n    case `SET_PLUGIN_STATUS`:\n      if (!action.plugin || !action.plugin?.name) {\n        throw new Error(`You can't set plugin status without a plugin`);\n      }\n      if (!_.isObject(action.payload)) {\n        throw new Error(\n          `You must pass an object into setPluginStatus. What was passed in was ${JSON.stringify(\n            action.payload,\n            null,\n            4,\n          )}`,\n        );\n      }\n      return {\n        ...state,\n        plugins: {\n          ...state.plugins,\n          [action.plugin.name]: _.merge(\n            {},\n            state.plugins[action.plugin.name],\n            action.payload,\n          ),\n        },\n      };\n    case `CREATE_NODE`:\n      state.LAST_NODE_COUNTER = action.payload.internal.counter;\n      return state;\n    default:\n      return state;\n  }\n};\n"],"mappings":";;;;;;;AAGA,MAAMA,YAAoC,GAAG;EAC3CC,YAAY,EAAG,EAAC;EAChBC,iBAAiB,EAAE,CAAC;EACpBC,OAAO,EAAE,CAAC;AACZ,CAAC;AAEM,MAAMC,aAAa,GAAGA,CAC3BC,KAA6B,GAAGL,YAAY,EAC5CM,MAAoB,KACO;EAAA,IAAAC,cAAA;EAC3B,QAAQD,MAAM,CAACE,IAAI;IACjB,KAAM,cAAa;MACjB,OAAOR,YAAY;IACrB,KAAM,qBAAoB;MACxB,OAAO;QACL,GAAGK,KAAK;QACRJ,YAAY,EAAEK,MAAM,CAACG;MACvB,CAAC;IACH,KAAM,mBAAkB;MACtB,IAAI,CAACH,MAAM,CAACI,MAAM,IAAI,GAAAH,cAAA,GAACD,MAAM,CAACI,MAAM,cAAAH,cAAA,eAAbA,cAAA,CAAeI,IAAI,GAAE;QAC1C,MAAM,IAAIC,KAAK,CAAE,8CAA6C,CAAC;MACjE;MACA,IAAI,CAAC,IAAAC,UAAA,CAAAC,OAAA,EAAWR,MAAM,CAACG,OAAO,CAAC,EAAE;QAC/B,MAAM,IAAIG,KAAK,CACZ,wEAAuEG,IAAI,CAACC,SAAS,CACpFV,MAAM,CAACG,OAAO,EACd,IAAI,EACJ,CACF,CAAE,EACJ,CAAC;MACH;MACA,OAAO;QACL,GAAGJ,KAAK;QACRF,OAAO,EAAE;UACP,GAAGE,KAAK,CAACF,OAAO;UAChB,CAACG,MAAM,CAACI,MAAM,CAACC,IAAI,GAAG,IAAAM,OAAA,CAAAH,OAAA,EACpB,CAAC,CAAC,EACFT,KAAK,CAACF,OAAO,CAACG,MAAM,CAACI,MAAM,CAACC,IAAI,CAAC,EACjCL,MAAM,CAACG,OACT;QACF;MACF,CAAC;IACH,KAAM,aAAY;MAChBJ,KAAK,CAACH,iBAAiB,GAAGI,MAAM,CAACG,OAAO,CAACS,QAAQ,CAACC,OAAO;MACzD,OAAOd,KAAK;IACd;MACE,OAAOA,KAAK;EAChB;AACF,CAAC;AAACe,OAAA,CAAAhB,aAAA,GAAAA,aAAA"}